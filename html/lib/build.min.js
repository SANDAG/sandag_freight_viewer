function MajorRoads(a){initializeHL(a),header="<p>"+props.NM+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.NM+"</div><div class='labelfield'>Name</div>    <div class='datafield'>"+props.Mileage+"</div><div class='labelfield'>Mileage: </div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>        <tr class='active'><td><strong>Capacity (lanes): </strong></td><td>"+numeral(props.Acres).format("0,0.0")+"</td></tr>        <tr class='active'><td><strong>Truck AADT: </strong></td><td>"+numeral(props.CAPACITY).format("0,0.0")+"</td></tr>        <tr class='active'><td><strong>Truck Share of AADT: </strong></td><td>"+numeral(props.OWNER).format("0,0.0")+"</td></tr>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Connectors</p>",featureClass="hwycl",featureIcon="hwyicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function Connectors(a){initializeHL(a),header="<p>"+props.Proj_ID+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Facility Name</div>    <div class='datafield'>"+props.Active+"</div><div class='labelfield'>Facility Served</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Lanes per direction: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>AADT</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Connectors</p>",featureClass="hwycl",featureIcon="nhsicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function InspectionFacilities(a){initializeHL(a),header="<p>"+props.Proj_ID+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Facility Name</div>    <div class='datafield'>"+props.Active+"</div><div class='labelfield'>Facility Served</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Truck Spaces Available: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Lanes per direction</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Truck Inspection Facilities</p>",featureClass="hwycl",featureIcon="hwyicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function TruckParkingFacilities(a){initializeHL(a),header="<p>"+props.NAME+"</p>",content="<div id='baseInfo'><div class='datafield'>"+props.NAME+"</div><div class='labelfield'>Facility Name</div><div class='datafield'>"+props.ACTIVE+"</div><div class='labelfield'>Active</div></div>\x3c!--close baseInfo--\x3e<div class='infoDivider'></div><div id='indicatorInfo'><ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e<li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul></ul><div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e<div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'><table class='table table-hover'><tr class='active'><td><strong>Truck Spaces Available: </strong></td><td>"+numeral(props.GIS_Acres).format("0,0.0")+"</td></tr><tr class='active'><td><strong>Truck Spaces Utilized: </strong></td><td>n/a</td></tr><tr class='active'><td><strong>Amenities: </strong></td><td>n/a</td></tr></table></div></div><div class='labelfield source'>Data Source: + props.Source</div></div>",featureName="<p>Type: Ports of Entry</p>",featureClass="hwycl",featureIcon="trkparkicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function RailYards(a){initializeHL(a),header="<p>"+props.NAME+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.OPERATOR1+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.OWNER+"</div><div class='labelfield'>Operator</div>    <div class='datafield'>"+props.TRACK_TYPE+"</div><div class='labelfield'>Line Serving</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Acres: </strong></td><td>"+props.TRACK_TYPE+"</td></tr>            <tr class='active'><td><strong>Annual Car Count: </strong></td><td>"+props.NAME+"</td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail Yards</p>",featureClass="railcl",featureIcon="railyardicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function RailLines(a){initializeHL(a),header="<p>"+props.d_Owner+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.d_Operat_1+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.d_Operat_2+"</div><div class='labelfield'>Operator</div>    <div class='datafield'>"+props.d_Operat_3+"</div><div class='labelfield'>Line Serving</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Number of Tracks: </strong></td><td>"+numeral(props.Capacity).format("0,0")+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Double Stack Clearance</a>: </strong></td><td> "+props.Activity_1+" </td></tr>            <tr class='active'><td><strong> <a title='Rail line that support 862k capacity rail freight' data-toggle='infotooltip'>862k Capacity</a>: </strong></td><td> "+numeral(props.Activity_2).format("0,0.0")+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Trains Daily</a>: </strong></td><td> "+numeral(props.Activity_3).format("0,0")+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail Lines</p>",featureClass="railcl",featureIcon="railicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function IntermodalFacilities(a){initializeHL(a),header="<p>"+props.Proj_ID+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.Active+"</div><div class='labelfield'>Operator(s)</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Truck Spaces Available: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Acres</a>: </strong></td><td> "+props.Activity_1+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Activity</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Intermodal Facilities</p>",featureClass="railcl",featureIcon="railintericon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function RailGradeCrossings(a){initializeHL(a),header="<p>"+props.Proj_ID+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.Active+"</div><div class='labelfield'>Operator(s)</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Tracks at Crossing: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>FRA Crossing History</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Rail Grade Crossings</p>",featureClass="railcl",featureIcon="railcrossicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function PortsOfEntry(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Port Name</div>    <div class='datafield'>"+props.Status+"</div><div class='labelfield'>Operator</div>    <div class='datafield'><a href='url'>"+props.url+"</a></div><div class='labelfield'>URL</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Pedestrian Crossings: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Truck Crossings</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Ports of Entry</p>",featureClass="portcl",featureIcon="porticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function PortTerminals(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Operator(s)</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Ship Arrivals: </strong></td><td>"+props.PORT_ID+"</td></tr>            <tr class='active'><td><strong> <a title='Available Cranes' data-toggle='infotooltip'>Available Cranes</a>: </strong></td><td> "+props.PORT_ID+" </td></tr>            <tr class='active'><td><strong>Warehouse Space: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong>2016 Ship Arrivals: </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Available Cranes' data-toggle='infotooltip'>Cargo Handled</a>: </strong></td><td> "+props.PORT_ID+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Port Terminals</p>",featureClass="marineportcl",featureIcon="marineporticon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function Anchorages(a){initializeHL(a),header="<p>"+props.Proj_ID+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.Active+"</div><div class='labelfield'>Operator(s)</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Channel Width (ft): </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization determined by single overnight count' data-toggle='infotooltip'>Channel Depth (MLLW in ft)</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Anchorages</p>",featureClass="portcl",featureIcon="anchicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function CommAirports(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Type</div>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Owner</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Runway(s): </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Runway Length(s)</a>: </strong></td><td> "+props.Activity_1+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Total Acreage</a>: </strong></td><td>"+props.Activity_1+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Annual Operations</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Commercial Airports</p>",featureClass="commaircl",featureIcon="commicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function MunicipalAirports(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Type</div>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Owner</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Runway(s): </strong></td><td>"+props.Capacity+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Runway Length(s)</a>: </strong></td><td> "+props.Activity_1+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Total Acreage</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Annual Operations</a>: </strong></td><td> "+props.Activity_1+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Municipal Airports</p>",featureClass="relaircl",featureIcon="relicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function EmploymentCenters(a){initializeHL(a),header="<p>"+props.NAME+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Name+"</div><div class='labelfield'>Type</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Employment: </strong></td><td>"+props.Link+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Establishments</a>: </strong></td><td> "+props.NAME+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Acres</a>: </strong></td><td> "+props.NAME+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Employment Centers</p>",featureClass="fcmegacl",featureIcon="fcmegaicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function OtherEmployers(a){initializeHL(a),header="<p>"+props.Name+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.Proj_ID+"</div><div class='labelfield'>Type</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Employment: </strong></td><td>"+props.Link+"</td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Establishments</a>: </strong></td><td> "+props.LINK+" </td></tr>            <tr class='active'><td><strong> <a title='Truck space utilization' data-toggle='infotooltip'>Acres</a>: </strong></td><td> "+props.LINK+" </td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Other Major Employers</p>",featureClass="fcmajorcl",featureIcon="fcmajoricon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function Pipelines(a){initializeHL(a),header="<p>"+props.OPERATOR+"</p>",content="<div id='baseInfo'>    <div class='datafield'>"+props.OPERATOR+"</div><div class='labelfield'>Owner</div>    <div class='datafield'>"+props.Source+"</div><div class='labelfield'>Operator</div>    </div>\x3c!--close baseInfo--\x3e    <div class='infoDivider'></div>    <div id='indicatorInfo'>    <ul class='nav nav-tabs'>\x3c!--tabs for indicators--\x3e    <li class='active'><a href='#Cap' data-toggle='tab'>Capacity & Activity</a></li></ul>    <div id='indicator' class='tab-content'>\x3c!--tab panes--\x3e    <div class='tab-pane active' id='Cap' style='padding-bottom: 12px;'>        <table class='table table-hover'>            <tr class='active'><td><strong>Material Transported: </strong></td><td>"+props.Capacity+"</td></tr>        </table>    </div></div>    <div class='labelfield source'>Data Source: "+props.Source+"</div></div>",featureName="<p>Type: Energy & Utilities</p>",featureClass="energycl",featureIcon="pipelineicon icon",contentPush(header,content,featureName,featureClass,featureIcon)}function activateTooltip(){$("[data-toggle=infotooltip]").tooltip({placement:"left"})}function modalLink(a,b){var c=document.getElementById(a);void 0!==c&&null!=c?$("#"+a+" li:eq("+b+") a").tab("show"):setTimeout(function(){$("#"+a+" li:eq("+b+") a").tab("show")},0)}function addStreetLabels(){var a=Esri_transportation.addTo(map);topPane.appendChild(a.getContainer()),a.setZIndex(2)}function renderLayers(){var a=[];$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&a.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var b=sortByKey(a,"z-index");$.each(b,function(){map.addLayer(window[$(this)[0].layer[0].id])})}function pointify(a){for(var b=jQuery.extend(!0,{},a),c=0;c<b.features.length;c++)b.features[c].geometry.type="Point",b.features[c].geometry.coordinates=[b.features[c].properties.LONG_,b.features[c].properties.LAT];return b}function pointify_topo(a,b){var c=jQuery.extend(!0,{},a.objects[b]);c.features=c.geometries,c.type="FeatureCollection",c.geometries=[];for(var d=0;d<c.features.length;d++)c.features[d].type="Feature",c.features[d].geometry={type:"Point",coordinates:[c.features[d].properties.LONG_,c.features[d].properties.LAT]};return c}function loadLayers(){"false"===$("#mapLoad").val()&&($.getJSON("data/MajorRoads_20171002.json",function(a){layer1.addData(a)}),polyLayer.push("layer1"),$.getJSON("data/TruckParking_Point.json",function(a){layer4pt.addData(a)}),$.getJSON("data/TruckParking_Poly.json",function(a){layer4poly.addData(a)}),polyLayer.push("layer4poly"),$.getJSON("data/Rail_Yards_Points.json",function(a){layer5pt.addData(a)}),$.getJSON("data/Rail_Yards_Polys.json",function(a){layer5poly.addData(a)}),polyLayer.push("layer5poly"),$.getJSON("data/Railroads_Freight.json",function(a){layer6.addData(a)}),polyLayer.push("layer6"),$.getJSON("data/POE_Points.json",function(a){layer9pt.addData(a)}),$.getJSON("data/POE_Footprints.json",function(a){layer9poly.addData(a)}),polyLayer.push("layer9poly"),$.getJSON("data/MarineTerminals_Points.json",function(a){layer10pt.addData(a)}),$.getJSON("data/MarineTerminals.json",function(a){layer10poly.addData(a)}),polyLayer.push("layer10poly"),$.getJSON("data/CommAirports_Points.json",function(a){layer12pt.addData(a)}),$.getJSON("data/CommAirports.json",function(a){layer12poly.addData(a)}),polyLayer.push("layer12poly"),$.getJSON("data/MunicipalAirports_Points.json",function(a){layer13pt.addData(a)}),$.getJSON("data/MunicipalAirports.json",function(a){layer13poly.addData(a)}),polyLayer.push("layer13poly"),$.getJSON("data/employment_points.json",function(a){layer14pt.addData(a)}),$.getJSON("data/employment.json",function(a){layer14poly.addData(a)}),polyLayer.push("layer14poly"),$.getJSON("data/employment_points.json",function(a){layer15pt.addData(a)}),$.getJSON("data/employment.json",function(a){layer15poly.addData(a)}),polyLayer.push("layer15poly"),$.getJSON("data/pipelines.json",function(a){layer16.addData(a)}),polyLayer.push("layer16"),$(".legPanel").each(function(){$(this).find("input.layer").length==$(this).find("input.layer:checked").length?($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-check-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="false" />')):($(this).closest(".panel").find(".checked_all").html('<div class="chkicon dynico dynico-square-o"></div>'),$(this).closest(".panel-body").append('<input type="hidden" class="Chkd" value="true" />')),$(this).find(".dynacheck").length>0&&$(this).find("input.layer:checked").siblings(".dynacheck").find(".legend-check").html('<i class="dynico dynico-check-square-o"></i>')}),$("input#mapLoad").attr("value","true"),setTimeout(function(){renderLayers()},500))}function setMap(){$(".landingUI").fadeOut("fast","easeOutQuad",function(){$(".mapUI").fadeIn("fast","easeInQuad"),$("#mapDIV").fadeIn("fast","easeInQuad"),loadLayers(),map.invalidateSize(),resetHighlight(),resetInfoWindow()})}function loadScript(a){$.getScript("lib/tools/"+a+".js")}function getLocationHash(){return window.location.hash.substring(1).split("/")[0]}function executeOnLoad(a,b){null!==document.getElementById(a)?b():setTimeout(function(){executeOnLoad(a,b)},100)}function sortByKey(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return d<e?-1:d>e?1:0})}function toggleinfo(a){$("#togbtn").hasClass("hide")&&$("#togbtn").removeClass("hide"),$("#togbtn").hasClass("glyphicon-plus")&&$("#togbtn").attr("class","glyphicon glyphicon-minus InfoTgl");var b=document.getElementById("info").offsetHeight+document.getElementById("infoheader").offsetHeight+0;$("#infobox_").addClass("active").css("bottom",b)}function togglemin(a){$("#togbtn").hasClass("glyphicon-plus")||$("#togbtn").attr("class","glyphicon glyphicon-plus InfoTgl"),$("#infobox_").css("bottom",0).removeClass("active")}function initializeHL(a){return resetHighlight(),layersearch=a.feature,void 0===layersearch?(highlightMapFeature(a.target),props=a.target.feature.properties):(highlightMapFeature(a),props=layersearch.properties),$("#search-panel").fadeOut("fast"),$("#searchbox").typeahead("val",""),props}function contentPush(a,b,c,d,e){document.body.clientWidth<=375?(document.getElementById("mobileheader").innerHTML=a,document.getElementById("mobileinfo").innerHTML=b,document.getElementById("mobilefeatureName").innerHTML=c,document.getElementById("mobileMdHeader").className=d+" modal-header",$("#mobileInfo_modal").modal("show")):(document.getElementById("infoheader").innerHTML=a,document.getElementById("info").innerHTML=b,document.getElementById("featureName").innerHTML=c,document.getElementById("featureName").className=""+d,document.getElementById("infoheader").className=""+d,document.getElementById("iconography").className=""+e),toggleinfo(),activateTooltip()}function zoomToFeature(a){map.fitBounds(a.target.getBounds())}function zoomToPoint(a){var b=a.target,c=b.getLatLng();map.setView(c,15)}function zoomToFC(a){var b=a.target,c=b.getLatLng();map.setView(c,13)}function highlightMapFeature(a){"Point"!=a.feature.geometry.type?a.setStyle({weight:hlweight,color:""+hlColor}):(iconElem=L.DomUtil.get(a._icon),iconElem.id="preselect",$(iconElem).is("img")?(hlmarkerSize=rdIconSize+8,iconElem.style.border="4px "+hlColor+" solid",iconElem.style.height=hlmarkerSize+"px",iconElem.style.width=hlmarkerSize+"px",iconElem.style.marginTop="-"+hlmarkerSize/2+"px",iconElem.style.marginLeft="-"+hlmarkerSize/2+"px",iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-cm")?($(iconElem).append('<div class="markerBox cm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-sm")?($(iconElem).append('<div class="markerBox sm" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"):$("#preselect").hasClass("circle-md")&&($(iconElem).append('<div class="markerBox md" style="border-color:'+hlColor+'"></div>'),iconElem.id="selectedIcon"))}function resetHighlight(){for(var a=0,b=polyLayer.length;a<b;a++){var c=polyLayer[a],d=window[c].options.style;window[c].setStyle(d)}resetIconhighlights()}function resetIconhighlights(){var a=document.getElementById("selectedIcon");void 0!=a&&(a.id="prehide",$(".markerBox").remove(),$(iconElem).is("img")?(a.style.border="",a.style.height=rdIconSize+"px",a.style.width=rdIconSize+"px",a.style.marginTop="-"+rdIconSize/2+"px",a.style.marginLeft="-"+rdIconSize/2+"px",a.id=""):a.id="")}function resetInfoWindow(){$("#togbtn").addClass("hide"),$("#infobox_").removeClass("active").css("bottom",0),document.getElementById("featureName").innerHTML="",document.getElementById("infoheader").innerHTML="<p>Click feature to view details</p>",document.getElementById("infoheader").className="",document.getElementById("featureName").className="",document.getElementById("iconography").className="",document.getElementById("info").innerHTML=""}!function(a,b,c){"use strict";L.OpenFreightMarkers={},L.OpenFreightMarkers.version="1.0.0",L.OpenFreightMarkers.Icon=L.Icon.extend({options:{iconSize:[35,46],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],markerSet:"open-freight",mapMarker:"circle-md",iconSet:"dynico",spinClass:"fa-spin",extraClasses:"",icon:"home",markerColor:"blue",iconColor:"white",legendMarker:"circle-md",layer:"",title:"",onLoad:!0},initialize:function(a){a=L.Util.setOptions(this,a)},createIcon:function(){var a=b.createElement("div"),c=this.options;return c.icon&&(a.innerHTML=this._createInner()),c.bgPos&&(a.style.backgroundPosition=-c.bgPos.x+"px "+-c.bgPos.y+"px"),this._setIconStyles(a,"icon-"+c.markerColor),a},_createInner:function(){var a,b="",c="",d="",e=this.options;return a=e.icon.slice(0,e.iconSet.length+1)===e.iconSet+"-"?e.icon:e.iconSet+"-"+e.icon,e.spin&&"string"==typeof e.spinClass&&(b=e.spinClass),e.iconColor&&("white"===e.iconColor||"black"===e.iconColor?c="icon-"+e.iconColor:d="style='color: "+e.iconColor+"' "),"<i "+d+"class='"+e.extraClasses+" "+e.iconSet+" "+a+" "+b+" "+c+"'></i>"},_setIconStyles:function(a,b){var c,d,e=this.options;c="circle-sm"===e.mapMarker?"shadow"===b?L.point([30,30]):L.point([28,28]):"circle-md"===e.mapMarker?"shadow"===b?L.point([34,34]):L.point([32,32]):"circle-cm"===e.mapMarker?"shadow"===b?L.point([34,16]):L.point([28,36]):L.point(e["shadow"===b?"shadowSize":"iconSize"]),
"shadow"===b?"circle-cm"===e.mapMarker?d=L.point([10,12]):"circle-sm"===e.mapMarker||"circle-md"===e.mapMarker||(d=L.point(e.shadowAnchor||e.iconAnchor)):"circle-cm"===e.mapMarker?d=L.point([14,34]):"circle-sm"===e.mapMarker||"circle-md"===e.mapMarker||(d=L.point(e.iconAnchor)),!d&&c&&(d=c.divideBy(2,!0)),a.className="shadow"===b?e.mapMarker+"-"+b+" "+e.mapMarker:e.markerSet+"-"+b+" "+e.mapMarker,d&&(a.style.marginLeft=-d.x+"px",a.style.marginTop=-d.y+"px"),c&&(a.style.width=c.x+"px",a.style.height=c.y+"px")},createShadow:function(){var a=b.createElement("div");return this._setIconStyles(a,"shadow"),a}}),L.createLegend=function(b){a["DynaIcon"+b.layer]=b.iconSet+" "+b.iconSet+"-"+b.icon,a["DynaClass"+b.layer]=""+b.markerColor,a["DynaTitle"+b.layer]=""+b.title,"checkbox"===b.legendMarker?$("#"+b.layer+".dyna").wrap('<div class="checkbox" data-toggle="tooltip" title="Click to toggle layer"></div>').after('<label for="'+b.layer+'" class="dynacheck"><div class="legend-check"><i class="dynico dynico-square-o"></i></div> '+b.title+"</label>"):$("#"+b.layer+".dyna").wrap('<div class="checkbox" data-toggle="tooltip" title="Click to toggle layer"></div>').after('<label for="'+b.layer+'"><div class="'+b.legendMarker+" legend-icon "+b.markerSet+"-icon-"+b.markerColor+'"><i class="dynico dynico-'+b.icon+'"></i></div> '+b.title+"</label>"),!1===b.onLoad||$("#"+b.layer+".dyna").attr("checked",!0)},L.OpenFreightMarkers.icon=function(a,b){var c=$.extend({},b,a);return L.createLegend(c),new L.OpenFreightMarkers.Icon(c)}}(this,document),function(a){var b=!0;a.flexslider=function(c,d){var e=a(c);e.vars=a.extend({},a.flexslider.defaults,d);var f,g=e.vars.namespace,h=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,i=("ontouchstart"in window||h||window.DocumentTouch&&document instanceof DocumentTouch)&&e.vars.touch,j="click touchend MSPointerUp keyup",k="",l="vertical"===e.vars.direction,m=e.vars.reverse,n=e.vars.itemWidth>0,o="fade"===e.vars.animation,p=""!==e.vars.asNavFor,q={};a.data(c,"flexslider",e),q={init:function(){e.animating=!1,e.currentSlide=parseInt(e.vars.startAt?e.vars.startAt:0,10),isNaN(e.currentSlide)&&(e.currentSlide=0),e.animatingTo=e.currentSlide,e.atEnd=0===e.currentSlide||e.currentSlide===e.last,e.containerSelector=e.vars.selector.substr(0,e.vars.selector.search(" ")),e.slides=a(e.vars.selector,e),e.container=a(e.containerSelector,e),e.count=e.slides.length,e.syncExists=a(e.vars.sync).length>0,"slide"===e.vars.animation&&(e.vars.animation="swing"),e.prop=l?"top":"marginLeft",e.args={},e.manualPause=!1,e.stopped=!1,e.started=!1,e.startTimeout=null,e.transitions=!e.vars.video&&!o&&e.vars.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return e.pfx=b[c].replace("Perspective","").toLowerCase(),e.prop="-"+e.pfx+"-transform",!0;return!1}(),e.ensureAnimationEnd="",""!==e.vars.controlsContainer&&(e.controlsContainer=a(e.vars.controlsContainer).length>0&&a(e.vars.controlsContainer)),""!==e.vars.manualControls&&(e.manualControls=a(e.vars.manualControls).length>0&&a(e.vars.manualControls)),""!==e.vars.customDirectionNav&&(e.customDirectionNav=2===a(e.vars.customDirectionNav).length&&a(e.vars.customDirectionNav)),e.vars.randomize&&(e.slides.sort(function(){return Math.round(Math.random())-.5}),e.container.empty().append(e.slides)),e.doMath(),e.setup("init"),e.vars.controlNav&&q.controlNav.setup(),e.vars.directionNav&&q.directionNav.setup(),e.vars.keyboard&&(1===a(e.containerSelector).length||e.vars.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!e.animating&&(39===b||37===b)){var c=39===b?e.getTarget("next"):37===b&&e.getTarget("prev");e.flexAnimate(c,e.vars.pauseOnAction)}}),e.vars.mousewheel&&e.bind("mousewheel",function(a,b,c,d){a.preventDefault();var f=b<0?e.getTarget("next"):e.getTarget("prev");e.flexAnimate(f,e.vars.pauseOnAction)}),e.vars.pausePlay&&q.pausePlay.setup(),e.vars.slideshow&&e.vars.pauseInvisible&&q.pauseInvisible.init(),e.vars.slideshow&&(e.vars.pauseOnHover&&e.hover(function(){e.manualPlay||e.manualPause||e.pause()},function(){e.manualPause||e.manualPlay||e.stopped||e.play()}),e.vars.pauseInvisible&&q.pauseInvisible.isHidden()||(e.vars.initDelay>0?e.startTimeout=setTimeout(e.play,e.vars.initDelay):e.play())),p&&q.asNav.setup(),i&&e.vars.touch&&q.touch(),(!o||o&&e.vars.smoothHeight)&&a(window).bind("resize orientationchange focus",q.resize),e.find("img").attr("draggable","false"),setTimeout(function(){e.vars.start(e)},200)},asNav:{setup:function(){e.asNav=!0,e.animatingTo=Math.floor(e.currentSlide/e.move),e.currentItem=e.currentSlide,e.slides.removeClass(g+"active-slide").eq(e.currentItem).addClass(g+"active-slide"),h?(c._slider=e,e.slides.each(function(){var b=this;b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",function(a){a.preventDefault(),a.currentTarget._gesture&&a.currentTarget._gesture.addPointer(a.pointerId)},!1),b.addEventListener("MSGestureTap",function(b){b.preventDefault();var c=a(this),d=c.index();a(e.vars.asNavFor).data("flexslider").animating||c.hasClass("active")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})})):e.slides.on(j,function(b){b.preventDefault();var c=a(this),d=c.index();c.offset().left-a(e).scrollLeft()<=0&&c.hasClass(g+"active-slide")?e.flexAnimate(e.getTarget("prev"),!0):a(e.vars.asNavFor).data("flexslider").animating||c.hasClass(g+"active-slide")||(e.direction=e.currentItem<d?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){e.manualControls?q.controlNav.setupManual():q.controlNav.setupPaging()},setupPaging:function(){var b,c,d="thumbnails"===e.vars.controlNav?"control-thumbs":"control-paging",f=1;if(e.controlNavScaffold=a('<ol class="'+g+"control-nav "+g+d+'"></ol>'),e.pagingCount>1)for(var h=0;h<e.pagingCount;h++){if(c=e.slides.eq(h),void 0===c.attr("data-thumb-alt")&&c.attr("data-thumb-alt",""),altText=""!==c.attr("data-thumb-alt")?altText=' alt="'+c.attr("data-thumb-alt")+'"':"",b="thumbnails"===e.vars.controlNav?'<img src="'+c.attr("data-thumb")+'"'+altText+"/>":'<a href="#">'+f+"</a>","thumbnails"===e.vars.controlNav&&!0===e.vars.thumbCaptions){var i=c.attr("data-thumbcaption");""!==i&&void 0!==i&&(b+='<span class="'+g+'caption">'+i+"</span>")}e.controlNavScaffold.append("<li>"+b+"</li>"),f++}e.controlsContainer?a(e.controlsContainer).append(e.controlNavScaffold):e.append(e.controlNavScaffold),q.controlNav.set(),q.controlNav.active(),e.controlNavScaffold.delegate("a, img",j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(e.direction=d>e.currentSlide?"next":"prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},setupManual:function(){e.controlNav=e.manualControls,q.controlNav.active(),e.controlNav.bind(j,function(b){if(b.preventDefault(),""===k||k===b.type){var c=a(this),d=e.controlNav.index(c);c.hasClass(g+"active")||(d>e.currentSlide?e.direction="next":e.direction="prev",e.flexAnimate(d,e.vars.pauseOnAction))}""===k&&(k=b.type),q.setToClearWatchedEvent()})},set:function(){var b="thumbnails"===e.vars.controlNav?"img":"a";e.controlNav=a("."+g+"control-nav li "+b,e.controlsContainer?e.controlsContainer:e)},active:function(){e.controlNav.removeClass(g+"active").eq(e.animatingTo).addClass(g+"active")},update:function(b,c){e.pagingCount>1&&"add"===b?e.controlNavScaffold.append(a('<li><a href="#">'+e.count+"</a></li>")):1===e.pagingCount?e.controlNavScaffold.find("li").remove():e.controlNav.eq(c).closest("li").remove(),q.controlNav.set(),e.pagingCount>1&&e.pagingCount!==e.controlNav.length?e.update(c,b):q.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+g+'direction-nav"><li class="'+g+'nav-prev"><a class="'+g+'prev" href="#">'+e.vars.prevText+'</a></li><li class="'+g+'nav-next"><a class="'+g+'next" href="#">'+e.vars.nextText+"</a></li></ul>");e.customDirectionNav?e.directionNav=e.customDirectionNav:e.controlsContainer?(a(e.controlsContainer).append(b),e.directionNav=a("."+g+"direction-nav li a",e.controlsContainer)):(e.append(b),e.directionNav=a("."+g+"direction-nav li a",e)),q.directionNav.update(),e.directionNav.bind(j,function(b){b.preventDefault();var c;""!==k&&k!==b.type||(c=a(this).hasClass(g+"next")?e.getTarget("next"):e.getTarget("prev"),e.flexAnimate(c,e.vars.pauseOnAction)),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(){var a=g+"disabled";1===e.pagingCount?e.directionNav.addClass(a).attr("tabindex","-1"):e.vars.animationLoop?e.directionNav.removeClass(a).removeAttr("tabindex"):0===e.animatingTo?e.directionNav.removeClass(a).filter("."+g+"prev").addClass(a).attr("tabindex","-1"):e.animatingTo===e.last?e.directionNav.removeClass(a).filter("."+g+"next").addClass(a).attr("tabindex","-1"):e.directionNav.removeClass(a).removeAttr("tabindex")}},pausePlay:{setup:function(){var b=a('<div class="'+g+'pauseplay"><a href="#"></a></div>');e.controlsContainer?(e.controlsContainer.append(b),e.pausePlay=a("."+g+"pauseplay a",e.controlsContainer)):(e.append(b),e.pausePlay=a("."+g+"pauseplay a",e)),q.pausePlay.update(e.vars.slideshow?g+"pause":g+"play"),e.pausePlay.bind(j,function(b){b.preventDefault(),""!==k&&k!==b.type||(a(this).hasClass(g+"pause")?(e.manualPause=!0,e.manualPlay=!1,e.pause()):(e.manualPause=!1,e.manualPlay=!0,e.play())),""===k&&(k=b.type),q.setToClearWatchedEvent()})},update:function(a){"play"===a?e.pausePlay.removeClass(g+"pause").addClass(g+"play").html(e.vars.playText):e.pausePlay.removeClass(g+"play").addClass(g+"pause").html(e.vars.pauseText)}},touch:function(){function a(a){a.stopPropagation(),e.animating?a.preventDefault():(e.pause(),c._gesture.addPointer(a.pointerId),w=0,j=l?e.h:e.w,p=Number(new Date),i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j)}function b(a){a.stopPropagation();var b=a.target._slider;if(b){var d=-a.translationX,e=-a.translationY;if(w+=l?e:d,k=w,t=l?Math.abs(w)<Math.abs(-d):Math.abs(w)<Math.abs(-e),a.detail===a.MSGESTURE_FLAG_INERTIA)return void setImmediate(function(){c._gesture.stop()});(!t||Number(new Date)-p>500)&&(a.preventDefault(),!o&&b.transitions&&(b.vars.animationLoop||(k=w/(0===b.currentSlide&&w<0||b.currentSlide===b.last&&w>0?Math.abs(w)/j+2:1)),b.setProps(i+k,"setTouch")))}}function d(a){a.stopPropagation();var b=a.target._slider;if(b){if(b.animatingTo===b.currentSlide&&!t&&null!==k){var c=m?-k:k,d=c>0?b.getTarget("next"):b.getTarget("prev");b.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(c)>50||Math.abs(c)>j/2)?b.flexAnimate(d,b.vars.pauseOnAction):o||b.flexAnimate(b.currentSlide,b.vars.pauseOnAction,!0)}f=null,g=null,k=null,i=null,w=0}}var f,g,i,j,k,p,q,r,s,t=!1,u=0,v=0,w=0;h?(c.style.msTouchAction="none",c._gesture=new MSGesture,c._gesture.target=c,c.addEventListener("MSPointerDown",a,!1),c._slider=e,c.addEventListener("MSGestureChange",b,!1),c.addEventListener("MSGestureEnd",d,!1)):(q=function(a){e.animating?a.preventDefault():(window.navigator.msPointerEnabled||1===a.touches.length)&&(e.pause(),j=l?e.h:e.w,p=Number(new Date),u=a.touches[0].pageX,v=a.touches[0].pageY,i=n&&m&&e.animatingTo===e.last?0:n&&m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:n&&e.currentSlide===e.last?e.limit:n?(e.itemW+e.vars.itemMargin)*e.move*e.currentSlide:m?(e.last-e.currentSlide+e.cloneOffset)*j:(e.currentSlide+e.cloneOffset)*j,f=l?v:u,g=l?u:v,c.addEventListener("touchmove",r,!1),c.addEventListener("touchend",s,!1))},r=function(a){u=a.touches[0].pageX,v=a.touches[0].pageY,k=l?f-v:f-u,t=l?Math.abs(k)<Math.abs(u-g):Math.abs(k)<Math.abs(v-g),(!t||Number(new Date)-p>500)&&(a.preventDefault(),!o&&e.transitions&&(e.vars.animationLoop||(k/=0===e.currentSlide&&k<0||e.currentSlide===e.last&&k>0?Math.abs(k)/j+2:1),e.setProps(i+k,"setTouch")))},s=function(a){if(c.removeEventListener("touchmove",r,!1),e.animatingTo===e.currentSlide&&!t&&null!==k){var b=m?-k:k,d=b>0?e.getTarget("next"):e.getTarget("prev");e.canAdvance(d)&&(Number(new Date)-p<550&&Math.abs(b)>50||Math.abs(b)>j/2)?e.flexAnimate(d,e.vars.pauseOnAction):o||e.flexAnimate(e.currentSlide,e.vars.pauseOnAction,!0)}c.removeEventListener("touchend",s,!1),f=null,g=null,k=null,i=null},c.addEventListener("touchstart",q,!1))},resize:function(){!e.animating&&e.is(":visible")&&(n||e.doMath(),o?q.smoothHeight():n?(e.slides.width(e.computedW),e.update(e.pagingCount),e.setProps()):l?(e.viewport.height(e.h),e.setProps(e.h,"setTotal")):(e.vars.smoothHeight&&q.smoothHeight(),e.newSlides.width(e.computedW),e.setProps(e.computedW,"setTotal")))},smoothHeight:function(a){if(!l||o){var b=o?e:e.viewport;a?b.animate({height:e.slides.eq(e.animatingTo).height()},a):b.height(e.slides.eq(e.animatingTo).height())}},sync:function(b){var c=a(e.vars.sync).data("flexslider"),d=e.animatingTo;switch(b){case"animate":c.flexAnimate(d,e.vars.pauseOnAction,!1,!0);break;case"play":c.playing||c.asNav||c.play();break;case"pause":c.pause()}},uniqueID:function(b){return b.filter("[id]").add(b.find("[id]")).each(function(){var b=a(this);b.attr("id",b.attr("id")+"_clone")}),b},pauseInvisible:{visProp:null,init:function(){var a=q.pauseInvisible.getHiddenProp();if(a){var b=a.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(b,function(){q.pauseInvisible.isHidden()?e.startTimeout?clearTimeout(e.startTimeout):e.pause():e.started?e.play():e.vars.initDelay>0?setTimeout(e.play,e.vars.initDelay):e.play()})}},isHidden:function(){var a=q.pauseInvisible.getHiddenProp();return!!a&&document[a]},getHiddenProp:function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(f),f=setTimeout(function(){k=""},3e3)}},e.flexAnimate=function(b,c,d,f,h){if(e.vars.animationLoop||b===e.currentSlide||(e.direction=b>e.currentSlide?"next":"prev"),p&&1===e.pagingCount&&(e.direction=e.currentItem<b?"next":"prev"),!e.animating&&(e.canAdvance(b,h)||d)&&e.is(":visible")){if(p&&f){var j=a(e.vars.asNavFor).data("flexslider");if(e.atEnd=0===b||b===e.count-1,j.flexAnimate(b,!0,!1,!0,h),e.direction=e.currentItem<b?"next":"prev",j.direction=e.direction,Math.ceil((b+1)/e.visible)-1===e.currentSlide||0===b)return e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),!1;e.currentItem=b,e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),b=Math.floor(b/e.visible)}if(e.animating=!0,e.animatingTo=b,c&&e.pause(),e.vars.before(e),e.syncExists&&!h&&q.sync("animate"),e.vars.controlNav&&q.controlNav.active(),n||e.slides.removeClass(g+"active-slide").eq(b).addClass(g+"active-slide"),e.atEnd=0===b||b===e.last,e.vars.directionNav&&q.directionNav.update(),b===e.last&&(e.vars.end(e),e.vars.animationLoop||e.pause()),o)i?(e.slides.eq(e.currentSlide).css({opacity:0,zIndex:1}),e.slides.eq(b).css({opacity:1,zIndex:2}),e.wrapup(t)):(e.slides.eq(e.currentSlide).css({zIndex:1}).animate({opacity:0},e.vars.animationSpeed,e.vars.easing),e.slides.eq(b).css({zIndex:2}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing,e.wrapup));else{var k,r,s,t=l?e.slides.filter(":first").height():e.computedW;n?(k=e.vars.itemMargin,s=(e.itemW+k)*e.move*e.animatingTo,r=s>e.limit&&1!==e.visible?e.limit:s):r=0===e.currentSlide&&b===e.count-1&&e.vars.animationLoop&&"next"!==e.direction?m?(e.count+e.cloneOffset)*t:0:e.currentSlide===e.last&&0===b&&e.vars.animationLoop&&"prev"!==e.direction?m?0:(e.count+1)*t:m?(e.count-1-b+e.cloneOffset)*t:(b+e.cloneOffset)*t,e.setProps(r,"",e.vars.animationSpeed),e.transitions?(e.vars.animationLoop&&e.atEnd||(e.animating=!1,e.currentSlide=e.animatingTo),e.container.unbind("webkitTransitionEnd transitionend"),e.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(e.ensureAnimationEnd),e.wrapup(t)}),clearTimeout(e.ensureAnimationEnd),e.ensureAnimationEnd=setTimeout(function(){e.wrapup(t)},e.vars.animationSpeed+100)):e.container.animate(e.args,e.vars.animationSpeed,e.vars.easing,function(){e.wrapup(t)})}e.vars.smoothHeight&&q.smoothHeight(e.vars.animationSpeed)}},e.wrapup=function(a){o||n||(0===e.currentSlide&&e.animatingTo===e.last&&e.vars.animationLoop?e.setProps(a,"jumpEnd"):e.currentSlide===e.last&&0===e.animatingTo&&e.vars.animationLoop&&e.setProps(a,"jumpStart")),e.animating=!1,e.currentSlide=e.animatingTo,e.vars.after(e)},e.animateSlides=function(){!e.animating&&b&&e.flexAnimate(e.getTarget("next"))},e.pause=function(){clearInterval(e.animatedSlides),e.animatedSlides=null,e.playing=!1,e.vars.pausePlay&&q.pausePlay.update("play"),e.syncExists&&q.sync("pause")},e.play=function(){e.playing&&clearInterval(e.animatedSlides),e.animatedSlides=e.animatedSlides||setInterval(e.animateSlides,e.vars.slideshowSpeed),e.started=e.playing=!0,e.vars.pausePlay&&q.pausePlay.update("pause"),e.syncExists&&q.sync("play")},e.stop=function(){e.pause(),e.stopped=!0},e.canAdvance=function(a,b){var c=p?e.pagingCount-1:e.last;return!!b||(!(!p||e.currentItem!==e.count-1||0!==a||"prev"!==e.direction)||(!p||0!==e.currentItem||a!==e.pagingCount-1||"next"===e.direction)&&(!(a===e.currentSlide&&!p)&&(!!e.vars.animationLoop||(!e.atEnd||0!==e.currentSlide||a!==c||"next"===e.direction)&&(!e.atEnd||e.currentSlide!==c||0!==a||"next"!==e.direction))))},e.getTarget=function(a){return e.direction=a,"next"===a?e.currentSlide===e.last?0:e.currentSlide+1:0===e.currentSlide?e.last:e.currentSlide-1},e.setProps=function(a,b,c){var d=function(){var c=a||(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo;return-1*function(){if(n)return"setTouch"===b?a:m&&e.animatingTo===e.last?0:m?e.limit-(e.itemW+e.vars.itemMargin)*e.move*e.animatingTo:e.animatingTo===e.last?e.limit:c;switch(b){case"setTotal":return m?(e.count-1-e.currentSlide+e.cloneOffset)*a:(e.currentSlide+e.cloneOffset)*a;case"setTouch":return a;case"jumpEnd":return m?a:e.count*a;case"jumpStart":return m?e.count*a:a;default:return a}}()+"px"}();e.transitions&&(d=l?"translate3d(0,"+d+",0)":"translate3d("+d+",0,0)",c=void 0!==c?c/1e3+"s":"0s",e.container.css("-"+e.pfx+"-transition-duration",c),e.container.css("transition-duration",c)),e.args[e.prop]=d,(e.transitions||void 0===c)&&e.container.css(e.args),e.container.css("transform",d)},e.setup=function(b){if(o)e.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),"init"===b&&(i?e.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+e.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(e.currentSlide).css({opacity:1,zIndex:2}):0==e.vars.fadeFirstSlide?e.slides.css({opacity:0,display:"block",zIndex:1}).eq(e.currentSlide).css({zIndex:2}).css({opacity:1}):e.slides.css({opacity:0,display:"block",zIndex:1}).eq(e.currentSlide).css({zIndex:2}).animate({opacity:1},e.vars.animationSpeed,e.vars.easing)),e.vars.smoothHeight&&q.smoothHeight();else{var c,d;"init"===b&&(e.viewport=a('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(e).append(e.container),e.cloneCount=0,e.cloneOffset=0,m&&(d=a.makeArray(e.slides).reverse(),e.slides=a(d),e.container.empty().append(e.slides))),e.vars.animationLoop&&!n&&(e.cloneCount=2,e.cloneOffset=1,"init"!==b&&e.container.find(".clone").remove(),e.container.append(q.uniqueID(e.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(q.uniqueID(e.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),e.newSlides=a(e.vars.selector,e),c=m?e.count-1-e.currentSlide+e.cloneOffset:e.currentSlide+e.cloneOffset,l&&!n?(e.container.height(200*(e.count+e.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){e.newSlides.css({display:"block"}),e.doMath(),e.viewport.height(e.h),e.setProps(c*e.h,"init")},"init"===b?100:0)):(e.container.width(200*(e.count+e.cloneCount)+"%"),e.setProps(c*e.computedW,"init"),setTimeout(function(){e.doMath(),e.newSlides.css({width:e.computedW,marginRight:e.computedM,float:"left",display:"block"}),e.vars.smoothHeight&&q.smoothHeight()},"init"===b?100:0))}n||e.slides.removeClass(g+"active-slide").eq(e.currentSlide).addClass(g+"active-slide"),e.vars.init(e)},e.doMath=function(){var a=e.slides.first(),b=e.vars.itemMargin,c=e.vars.minItems,d=e.vars.maxItems;e.w=void 0===e.viewport?e.width():e.viewport.width(),e.h=a.height(),e.boxPadding=a.outerWidth()-a.width(),n?(e.itemT=e.vars.itemWidth+b,e.itemM=b,e.minW=c?c*e.itemT:e.w,e.maxW=d?d*e.itemT-b:e.w,e.itemW=e.minW>e.w?(e.w-b*(c-1))/c:e.maxW<e.w?(e.w-b*(d-1))/d:e.vars.itemWidth>e.w?e.w:e.vars.itemWidth,e.visible=Math.floor(e.w/e.itemW),e.move=e.vars.move>0&&e.vars.move<e.visible?e.vars.move:e.visible,e.pagingCount=Math.ceil((e.count-e.visible)/e.move+1),e.last=e.pagingCount-1,e.limit=1===e.pagingCount?0:e.vars.itemWidth>e.w?e.itemW*(e.count-1)+b*(e.count-1):(e.itemW+b)*e.count-e.w-b):(e.itemW=e.w,e.itemM=b,e.pagingCount=e.count,e.last=e.count-1),e.computedW=e.itemW-e.boxPadding,e.computedM=e.itemM},e.update=function(a,b){e.doMath(),n||(a<e.currentSlide?e.currentSlide+=1:a<=e.currentSlide&&0!==a&&(e.currentSlide-=1),e.animatingTo=e.currentSlide),e.vars.controlNav&&!e.manualControls&&("add"===b&&!n||e.pagingCount>e.controlNav.length?q.controlNav.update("add"):("remove"===b&&!n||e.pagingCount<e.controlNav.length)&&(n&&e.currentSlide>e.last&&(e.currentSlide-=1,e.animatingTo-=1),q.controlNav.update("remove",e.last))),e.vars.directionNav&&q.directionNav.update()},e.addSlide=function(b,c){var d=a(b);e.count+=1,e.last=e.count-1,l&&m?void 0!==c?e.slides.eq(e.count-c).after(d):e.container.prepend(d):void 0!==c?e.slides.eq(c).before(d):e.container.append(d),e.update(c,"add"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.added(e)},e.removeSlide=function(b){var c=isNaN(b)?e.slides.index(a(b)):b;e.count-=1,e.last=e.count-1,isNaN(b)?a(b,e.slides).remove():l&&m?e.slides.eq(e.last).remove():e.slides.eq(b).remove(),e.doMath(),e.update(c,"remove"),e.slides=a(e.vars.selector+":not(.clone)",e),e.setup(),e.vars.removed(e)},q.init()},a(window).blur(function(a){b=!1}).focus(function(a){b=!0}),a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},a.fn.flexslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length&&!0===b.allowOneSlide||0===e.length?(e.fadeIn(400),b.start&&b.start(c)):void 0===c.data("flexslider")&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),!0);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),!0);break;default:"number"==typeof b&&c.flexAnimate(b,!0)}}}(jQuery),function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){return b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===n)a._value=0;else{for("."!==l[m].delimiters.decimal&&(b=b.replace(/\./g,"").replace(l[m].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+l[m].abbreviations.thousand+"(?:\\)|(\\"+l[m].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+l[m].abbreviations.million+"(?:\\)|(\\"+l[m].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+l[m].abbreviations.billion+"(?:\\)|(\\"+l[m].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+l[m].abbreviations.trillion+"(?:\\)|(\\"+l[m].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1&&Math.pow(1024,g+1));g++);a._value=(k||1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e=b.indexOf("$")<=1,f="";return b.indexOf(" $")>-1?(f=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(f=" ",b=b.replace("$ ","")):b=b.replace("$",""),d=i(a._value,b,c),e?d.indexOf("(")>-1||d.indexOf("-")>-1?(d=d.split(""),d.splice(1,0,l[m].currency.symbol+f),d=d.join("")):d=l[m].currency.symbol+f+d:d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,f+l[m].currency.symbol),d=d.join("")):d=d+f+l[m].currency.symbol,d}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-3600*b)/60),d=Math.round(a._value-3600*b-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=3600*Number(b[0]),c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,o=!1,p=!1,q="",r="",s="",t=Math.abs(a),u=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],v="",w=!1;if(0===a&&null!==n)return n;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(o=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(c.indexOf(" a")>-1?(q=" ",c=c.replace(" a","")):c=c.replace("a",""),t>=Math.pow(10,12)?(q+=l[m].abbreviations.trillion,a/=Math.pow(10,12)):t<Math.pow(10,12)&&t>=Math.pow(10,9)?(q+=l[m].abbreviations.billion,a/=Math.pow(10,9)):t<Math.pow(10,9)&&t>=Math.pow(10,6)?(q+=l[m].abbreviations.million,a/=Math.pow(10,6)):t<Math.pow(10,6)&&t>=Math.pow(10,3)&&(q+=l[m].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(r=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=u.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){r+=u[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(s=" ",c=c.replace(" o","")):c=c.replace("o",""),s+=l[m].ordinal(a)),c.indexOf("[.]")>-1&&(p=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),v=b(a,i[0].length+i[1].length,d,i[1].length)):v=b(a,i.length,d),h=v.split(".")[0],v=v.split(".")[1].length?l[m].delimiters.decimal+v.split(".")[1]:"",p&&0===Number(v.slice(1))&&(v="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),w=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l[m].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&w?"(":"")+(!k&&w?"-":"")+(!w&&o?"+":"")+h+v+(s||"")+(q||"")+(r||"")+(k&&w?")":"")}function j(a,b){l[a]=b}var k,l={},m="en",n=null,o="0,0",p="undefined"!=typeof module&&module.exports;k=function(b){return k.isNumeral(b)?b=b.value():0===b||void 0===b?b=0:Number(b)||(b=k.fn.unformat(b)),new a(Number(b))},k.version="1.5.2",k.isNumeral=function(b){return b instanceof a},k.language=function(a,b){if(!a)return m;if(a&&!b){if(!l[a])throw new Error("Unknown language : "+a);m=a}return(b||!l[a])&&j(a,b),k},k.languageData=function(a){if(!a)return l[m];if(!l[a])throw new Error("Unknown language : "+a);return l[a]},k.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1==~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),k.zeroFormat=function(a){n="string"==typeof a?a:null},k.defaultFormat=function(a){o="string"==typeof a?a:"0.0"},k.fn=a.prototype={clone:function(){return k(this)},format:function(a,b){return c(this,a||o,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a||o)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){return this._value=this._value+Number(a),this},subtract:function(a){return this._value=this._value-Number(a),this},multiply:function(a){return this._value=this._value*Number(a),this},divide:function(a){return this._value=this._value/Number(a),this},difference:function(a){var b=this._value-Number(a);return 0>b&&(b=-b),b}},p&&(module.exports=k),"undefined"==typeof ender&&(this.numeral=k),"function"==typeof define&&define.amd&&define([],function(){return k})}.call(this),function(a){function b(a,b){return"function"==typeof a?a.call(b):a}function c(b,c){this.$element=a(b),this.options=c,this.enabled=!0,this.fixTitle()}c.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var d=this.tip();d.find(".tipsy-inner")[this.options.html?"html":"text"](c),d[0].className="tipsy",d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var e=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});if("object"==typeof this.$element[0].nearestViewportElement){var f=this.$element[0],g=f.getBoundingClientRect();e.width=g.width,e.height=g.height}var h,i=d[0].offsetWidth,j=d[0].offsetHeight,k=b(this.options.gravity,this.$element[0]);switch(k.charAt(0)){case"n":h={top:e.top+e.height+this.options.offset,left:e.left+e.width/2-i/2};break;case"s":h={top:e.top-j-this.options.offset,left:e.left+e.width/2-i/2};break;case"e":h={top:e.top+e.height/2-j/2,left:e.left-i-this.options.offset};break;case"w":h={top:e.top+e.height/2-j/2,left:e.left+e.width+this.options.offset}}2==k.length&&("w"==k.charAt(1)?h.left=e.left+e.width/2-15:h.left=e.left+e.width/2-i+15),d.css(h).addClass("tipsy-"+k),d.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+k.charAt(0),this.options.className&&d.addClass(b(this.options.className,this.$element[0])),this.options.fade?d.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):d.css({visibility:"visible",opacity:this.options.opacity});var l=this,m=function(a){return function(){l.$tip.stop(),l.tipHovered=a,a||(0===l.options.delayOut?l.hide():setTimeout(function(){"out"==l.hoverState&&l.hide()},l.options.delayOut))}};d.hover(m(!0),m(!1))}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("original-title"))&&a.attr("original-title",a.attr("title")||"").removeAttr("title"),"object"==typeof a.context.nearestViewportElement&&a.children("title").length&&a.append("<original-title>"+(a.children("title").text()||"")+"</original-title>").children("title").remove()},getTitle:function(){var a,b=this.$element,c=this.options;if(this.fixTitle(),"string"==typeof c.title){var d="title"==c.title?"original-title":c.title;a=b.children(d).length?b.children(d).html():b.attr(d)}else"function"==typeof c.title&&(a=c.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||c.fallback},tip:function(){
return this.$tip||(this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},a.fn.tipsy=function(b){function d(d){var e=a.data(d,"tipsy");return e||(e=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",e)),e}function e(){var a=d(this);a.hoverState="in",0===b.delayIn?a.show():(a.fixTitle(),setTimeout(function(){"in"==a.hoverState&&a.show()},b.delayIn))}function f(){var a=d(this);if(a.hoverState="out",0===b.delayOut)a.hide();else{var c=function(){a.tipHovered&&b.hoverlock||"out"==a.hoverState&&a.hide()};setTimeout(c,b.delayOut)}}if(!0===b)return this.data("tipsy");if("string"==typeof b){var g=this.data("tipsy");return g&&g[b](),this}if(b=a.extend({},a.fn.tipsy.defaults,b),b.hoverlock&&0===b.delayOut&&(b.delayOut=100),"manual"!=b.trigger){var h=b.live?"live":"bind",i="hover"==b.trigger?"mouseenter":"focus",j="hover"==b.trigger?"mouseleave":"blur";this[h](i,e)[h](j,f)}return this},a.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",hoverlock:!1},a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(b,c){return function(){var d={ns:c[0],ew:c.length>1&&c[1]},e=a(document).scrollTop()+b,f=a(document).scrollLeft()+b,g=a(this);return g.offset().top<e&&(d.ns="n"),g.offset().left<f&&(d.ew="w"),a(window).width()+a(document).scrollLeft()-g.offset().left<b&&(d.ew="e"),a(window).height()+a(document).scrollTop()-g.offset().top<b&&(d.ns="s"),d.ns+(d.ew?d.ew:"")}}}(jQuery),function(a){var b=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return void 0===a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return!!(d=c.call(null,e,a,b))&&void 0}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return!(d=c.call(null,e,a,b))&&void 0}),!!d):d},mixin:a.extend,getUniqueId:function(){var a=0;return function(){return a++}}(),templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},noop:function(){}}}(),c="0.10.5",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(){var c=[].slice.call(arguments,0);return function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key]),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function a(a){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix))}function c(){return(new Date).getTime()}function d(a){return JSON.stringify(b.isUndefined(a)?null:a)}function e(a){return JSON.parse(a)}var f,g;try{f=window.localStorage,f.setItem("~~~","!"),f.removeItem("~~~")}catch(h){f=null}return g=f&&window.JSON?{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},get:function(a){return this.isExpired(a)&&this.remove(a),e(f.getItem(this._prefix(a)))},set:function(a,e,g){return b.isNumber(g)?f.setItem(this._ttlKey(a),d(c()+g)):f.removeItem(this._ttlKey(a)),f.setItem(this._prefix(a),d(e))},remove:function(a){return f.removeItem(this._ttlKey(a)),f.removeItem(this._prefix(a)),this},clear:function(){var a,b,c=[],d=f.length;for(a=0;d>a;a++)(b=f.key(a)).match(this.keyMatcher)&&c.push(b.replace(this.keyMatcher,""));for(a=c.length;a--;)this.remove(c[a]);return this},isExpired:function(a){var d=e(f.getItem(this._ttlKey(a)));return!!(b.isNumber(d)&&c()>d)}}:{get:b.noop,set:b.noop,remove:b.noop,clear:b.noop,isExpired:b.noop},b.mixin(a.prototype,g),a}(),g=function(){"use strict";function c(b){b=b||{},this.cancelled=!1,this.lastUrl=null,this._send=b.transport?d(b.transport):a.ajax,this._get=b.rateLimiter?b.rateLimiter(this._get):this._get,this._cache=!1===b.cache?new e(0):i}function d(c){return function(d,e){function f(a){b.defer(function(){h.resolve(a)})}function g(a){b.defer(function(){h.reject(a)})}var h=a.Deferred();return c(d,e,f,g),h}}var f=0,g={},h=6,i=new e(10);return c.setMaxPendingRequests=function(a){h=a},c.resetCache=function(){i.reset()},b.mixin(c.prototype,{_get:function(a,b,c){function d(b){c&&c(null,b),k._cache.set(a,b)}function e(){c&&c(!0)}function i(){f--,delete g[a],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var j,k=this;this.cancelled||a!==this.lastUrl||((j=g[a])?j.done(d).fail(e):h>f?(f++,g[a]=this._send(a,b).done(d).fail(e).always(i)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(a,c,d){var e;return b.isFunction(c)&&(d=c,c={}),this.cancelled=!1,this.lastUrl=a,(e=this._cache.get(a))?b.defer(function(){d&&d(null,e)}):this._get(a,c,d),!!e},cancel:function(){this.cancelled=!0}}),c}(),h=function(){"use strict";function c(b){b=b||{},b.datumTokenizer&&b.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=b.datumTokenizer,this.queryTokenizer=b.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){return{ids:[],children:{}}}function f(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){function c(a,b){return a-b}var d=0,e=0,f=[];a=a.sort(c),b=b.sort(c);for(var g=a.length,h=b.length;g>d&&h>e;)a[d]<b[e]?d++:a[d]>b[e]?e++:(f.push(a[d]),d++,e++);return f}return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;f=c.datums.push(a)-1,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b.children[g]||(b.children[g]=e()),b.ids.push(f)})})},get:function(a){var c,e,h=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=h.trie,c=a.split("");b&&(d=c.shift());)b=b.children[d];return b&&0===c.length?(f=b.ids.slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return h.datums[a]}):[]},reset:function(){this.datums=[],this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function d(a){return a.local||null}function e(d){var e,f;return f={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=d.prefetch||null)&&(e=b.isString(e)?{url:e}:e,e=b.mixin(f,e),e.thumbprint=c+e.thumbprint,e.ajax.type=e.ajax.type||"GET",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&a.error("prefetch requires url to be set")),e}function f(c){function d(a){return function(c){return b.debounce(c,a)}}function e(a){return function(c){return b.throttle(c,a)}}var f,g;return g={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(f=c.remote||null)&&(f=b.isString(f)?{url:f}:f,f=b.mixin(g,f),f.rateLimiter=/^throttle$/i.test(f.rateLimitBy)?e(f.rateLimitWait):d(f.rateLimitWait),f.ajax.type=f.ajax.type||"GET",f.ajax.dataType=f.ajax.dataType||"json",delete f.rateLimitBy,delete f.rateLimitWait,!f.url&&a.error("remote requires url to be set")),f}return{local:d,prefetch:e,remote:f}}();!function(c){"use strict";function e(b){b&&(b.local||b.prefetch||b.remote)||a.error("one of local, prefetch, or remote is required"),this.limit=b.limit||5,this.sorter=j(b.sorter),this.dupDetector=b.dupDetector||k,this.local=i.local(b),this.prefetch=i.prefetch(b),this.remote=i.remote(b),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new h({datumTokenizer:b.datumTokenizer,queryTokenizer:b.queryTokenizer}),this.storage=this.cacheKey?new f(this.cacheKey):null}function j(a){function c(b){return b.sort(a)}function d(a){return a}return b.isFunction(a)?c:d}function k(){return!1}var l,m;l=c.Bloodhound,m={data:"data",protocol:"protocol",thumbprint:"thumbprint"},c.Bloodhound=e,e.noConflict=function(){return c.Bloodhound=l,e},e.tokenizers=d,b.mixin(e.prototype,{_loadPrefetch:function(b){function c(a){f.clear(),f.add(b.filter?b.filter(a):a),f._saveToStorage(f.index.serialize(),b.thumbprint,b.ttl)}var d,e,f=this;return(d=this._readFromStorage(b.thumbprint))?(this.index.bootstrap(d),e=a.Deferred().resolve()):e=a.ajax(b.url,b.ajax).done(c),e},_getFromRemote:function(a,b){function c(a,c){b(a?[]:f.remote.filter?f.remote.filter(c):c)}var d,e,f=this;if(this.transport)return a=a||"",e=encodeURIComponent(a),d=this.remote.replace?this.remote.replace(this.remote.url,a):this.remote.url.replace(this.remote.wildcard,e),this.transport.get(d,this.remote.ajax,c)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(a,b,c){this.storage&&(this.storage.set(m.data,a,c),this.storage.set(m.protocol,location.protocol,c),this.storage.set(m.thumbprint,b,c))},_readFromStorage:function(a){var b,c={};return this.storage&&(c.data=this.storage.get(m.data),c.protocol=this.storage.get(m.protocol),c.thumbprint=this.storage.get(m.thumbprint)),b=c.thumbprint!==a||c.protocol!==location.protocol,c.data&&!b?c.data:null},_initialize:function(){function c(){e.add(b.isFunction(f)?f():f)}var d,e=this,f=this.local;return d=this.prefetch?this._loadPrefetch(this.prefetch):a.Deferred().resolve(),f&&d.done(c),this.transport=this.remote?new g(this.remote):null,this.initPromise=d.promise()},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){this.index.add(a)},get:function(a,c){function d(a){var d=f.slice(0);b.each(a,function(a){var c;return c=b.some(d,function(b){return e.dupDetector(a,b)}),!c&&d.push(a),d.length<e.limit}),c&&c(e.sorter(d))}var e=this,f=[],g=!1;f=this.index.get(a),f=this.sorter(f).slice(0,this.limit),f.length<this.limit?g=this._getFromRemote(a,d):this._cancelLastRemoteRequest(),g||(f.length>0||!this.transport)&&c&&c(f)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&g.resetCache()},ttAdapter:function(){return b.bind(this.get,this)}})}(this);var j=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),k=function(){"use strict";var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),b.isMsie()&&b.isMsie()<=7&&b.mixin(a.input,{marginTop:"-1px"}),a}(),l=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}return b.mixin(c.prototype,{trigger:function(a){var b=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+a,b)}}),c}(),m=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&f>e;e+=1)d=!1===a[e].apply(b,c);return!d}return d}function g(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),n=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),o=function(){"use strict";function c(c){var e,f,h,i,j=this;c=c||{},c.input||a.error("input is missing"),e=b.bind(this._onBlur,this),f=b.bind(this._onFocus,this),h=b.bind(this._onKeydown,this),i=b.bind(this._onInput,this),this.$hint=a(c.hint),this.$input=a(c.input).on("blur.tt",e).on("focus.tt",f).on("keydown.tt",h),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop),b.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){g[a.which||a.keyCode]||b.defer(b.bind(j._onInput,j,a))}):this.$input.on("input.tt",i),this.query=this.$input.val(),this.$overflowHelper=d(this.$input)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function e(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function f(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var g;return g={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return(a||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,m,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(a){var b=g[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(a,b){var c,d,e;switch(a){case"tab":d=this.getHint(),e=this.getInputValue(),c=d&&d!==e&&!f(b);break;case"up":case"down":c=!f(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!f(b);break;default:c=!0}return c},_checkInputValue:function(){var a,b,c;a=this.getInputValue(),b=e(a,this.query),c=!!b&&this.query.length!==a.length,this.query=a,b?c&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(a){this.query=a},getInputValue:function(){return this.$input.val()},setInputValue:function(a,b){this.$input.val(a),b?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),!(""!==a&&c&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:!document.selection||(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),c}(),p=function(){"use strict";function c(c){c=c||{},c.templates=c.templates||{},c.source||a.error("missing source"),c.name&&!f(c.name)&&a.error("invalid dataset name: "+c.name),this.query=null,this.highlight=!!c.highlight,this.name=c.name||b.getUniqueId(),this.source=c.source,this.displayFn=d(c.display||c.displayKey),this.templates=e(c.templates,this.displayFn),this.$el=a(j.dataset.replace("%CLASS%",this.name))}function d(a){function c(b){return b[a]}return a=a||"value",b.isFunction(a)?a:c}function e(a,c){function d(a){return"<p>"+c(a)+"</p>"}return{empty:a.empty&&b.templatify(a.empty),header:a.header&&b.templatify(a.header),footer:a.footer&&b.templatify(a.footer),suggestion:a.suggestion||d}}function f(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var g="ttDataset",h="ttValue",i="ttDatum";return c.extractDatasetName=function(b){return a(b).data(g)},c.extractValue=function(b){return a(b).data(h)},c.extractDatum=function(b){return a(b).data(i)},b.mixin(c.prototype,m,{_render:function(c,d){function e(){return p.templates.empty({query:c,isEmpty:!0})}function f(){function e(b){var c;return c=a(j.suggestion).append(p.templates.suggestion(b)).data(g,p.name).data(h,p.displayFn(b)).data(i,b),c.children().each(function(){a(this).css(k.suggestionChild)}),c}var f,l;return f=a(j.suggestions).css(k.suggestions),l=b.map(d,e),f.append.apply(f,l),p.highlight&&n({className:"tt-highlight",node:f[0],pattern:c}),f}function l(){return p.templates.header({query:c,isEmpty:!o})}function m(){return p.templates.footer({query:c,isEmpty:!o})}if(this.$el){var o,p=this;this.$el.empty(),o=d&&d.length,!o&&this.templates.empty?this.$el.html(e()).prepend(p.templates.header?l():null).append(p.templates.footer?m():null):o&&this.$el.html(f()).prepend(p.templates.header?l():null).append(p.templates.footer?m():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(a){function b(b){c.canceled||a!==c.query||c._render(a,b)}var c=this;this.query=a,this.canceled=!1,this.source(a,b)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),c}(),q=function(){"use strict";function c(c){var e,f,g,h=this;c=c||{},c.menu||a.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=b.map(c.datasets,d),e=b.bind(this._onSuggestionClick,this),f=b.bind(this._onSuggestionMouseEnter,this),g=b.bind(this._onSuggestionMouseLeave,this),this.$menu=a(c.menu).on("click.tt",".tt-suggestion",e).on("mouseenter.tt",".tt-suggestion",f).on("mouseleave.tt",".tt-suggestion",g),b.each(this.datasets,function(a){h.$menu.append(a.getRoot()),a.onSync("rendered",h._onRendered,h)})}function d(a){return new p(a)}return b.mixin(c.prototype,m,{_onSuggestionClick:function(b){this.trigger("suggestionClicked",a(b.currentTarget))},_onSuggestionMouseEnter:function(b){this._removeCursor(),this._setCursor(a(b.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function a(a){return a.isEmpty()}this.isEmpty=b.every(this.datasets,a),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(a,b){a.first().addClass("tt-cursor"),!b&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(a){var b,c,d,e;if(this.isOpen){if(c=this._getCursor(),b=this._getSuggestions(),this._removeCursor(),d=b.index(c)+a,-1===(d=(d+1)%(b.length+1)-1))return void this.trigger("cursorRemoved");-1>d&&(d=b.length-1),this._setCursor(e=b.eq(d)),this._ensureVisible(e)}},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$menu.scrollTop(),e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>b?this.$menu.scrollTop(d+b):c>e&&this.$menu.scrollTop(d+(c-e))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(a){this.$menu.css("ltr"===a?k.ltr:k.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(a){var b=null;return a.length&&(b={raw:p.extractDatum(a),value:p.extractValue(a),datasetName:p.extractDatasetName(a)}),b},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(a){function c(b){b.update(a)}b.each(this.datasets,c)},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function a(a){a.destroy()}this.$menu.off(".tt"),this.$menu=null,b.each(this.datasets,a)}}),c}(),r=function(){"use strict";function c(c){var e,f,g;c=c||{},c.input||a.error("missing input"),this.isActivated=!1,this.autoselect=!!c.autoselect,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.$node=d(c.input,c.withHint),e=this.$node.find(".tt-dropdown-menu"),f=this.$node.find(".tt-input"),g=this.$node.find(".tt-hint"),f.on("blur.tt",function(a){var c,d,g;c=document.activeElement,d=e.is(c),g=e.has(c).length>0,b.isMsie()&&(d||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){f.focus()}))}),e.on("mousedown.tt",function(a){a.preventDefault()}),this.eventBus=c.eventBus||new l({el:f}),this.dropdown=new q({menu:e,datasets:c.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new o({input:f,hint:g}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function d(b,c){var d,f,h,i;d=a(b),f=a(j.wrapper).css(k.wrapper),h=a(j.dropdown).css(k.dropdown),i=d.clone().css(k.hint).css(e(d)),i.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),d.data(g,{dir:d.attr("dir"),autocomplete:d.attr("autocomplete"),spellcheck:d.attr("spellcheck"),style:d.attr("style")}),d.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(c?k.input:k.inputWithNoHint);try{!d.attr("dir")&&d.attr("dir","auto")}catch(l){}return d.wrap(f).parent().prepend(c?i:null).append(h)}function e(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function f(a){var c=a.find(".tt-input");b.each(c.data(g),function(a,d){b.isUndefined(a)?c.removeAttr(d):c.attr(d,a)}),c.detach().removeData(g).removeClass("tt-input").insertAfter(a),a.remove()}var g="ttAttrs";return b.mixin(c.prototype,{_onSuggestionClicked:function(a,b){var c;(c=this.dropdown.getDatumForSuggestion(b))&&this._select(c)},_onCursorMoved:function(){var a=this.dropdown.getDatumForCursor();this.input.setInputValue(a.value,!0),this.eventBus.trigger("cursorchanged",a.raw,a.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(a,b){var c,d;c=this.dropdown.getDatumForCursor(),d=this.dropdown.getDatumForTopSuggestion(),c?(this._select(c),b.preventDefault()):this.autoselect&&d&&(this._select(d),b.preventDefault())},_onTabKeyed:function(a,b){var c;(c=this.dropdown.getDatumForCursor())?(this._select(c),b.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var a=this.input.getQuery();this.dropdown.isEmpty&&a.length>=this.minLength?this.dropdown.update(a):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(a,b){this.input.clearHintIfInvalid(),b.length>=this.minLength?this.dropdown.update(b):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var a;this.dir!==(a=this.input.getLanguageDirection())&&(this.dir=a,this.$node.css("direction",a),this.dropdown.setLanguageDirection(a))},_updateHint:function(){var a,c,d,e,f,g;a=this.dropdown.getDatumForTopSuggestion(),a&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(c=this.input.getInputValue(),d=o.normalizeQuery(c),e=b.escapeRegExChars(d),f=new RegExp("^(?:"+e+")(.+$)","i"),g=f.exec(a.value),g?this.input.setHint(c+g[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(a){var b,c,d,e;b=this.input.getHint(),c=this.input.getQuery(),d=a||this.input.isCursorAtEnd(),b&&c!==b&&d&&(e=this.dropdown.getDatumForTopSuggestion(),e&&this.input.setInputValue(e.value),this.eventBus.trigger("autocompleted",e.raw,e.datasetName))},_select:function(a){this.input.setQuery(a.value),this.input.setInputValue(a.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",a.raw,a.datasetName),this.dropdown.close(),b.defer(b.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(a){a=b.toStr(a),this.isActivated?this.input.setInputValue(a):(this.input.setQuery(a),this.input.setInputValue(a,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),f(this.$node),this.$node=null}}),c}();!function(){"use strict";var c,d,e;c=a.fn.typeahead,d="ttTypeahead",e={initialize:function(c,e){function f(){var f,g=a(this);b.each(e,function(a){a.highlight=!!c.highlight}),f=new r({input:g,eventBus:new l({el:g}),withHint:!!b.isUndefined(c.hint)||!!c.hint,minLength:c.minLength,autoselect:c.autoselect,datasets:e}),g.data(d,f)}return e=b.isArray(e)?e:[].slice.call(arguments,1),c=c||{},this.each(f)},open:function(){function b(){var b;(b=a(this).data(d))&&b.open()}return this.each(b)},close:function(){function b(){var b;(b=a(this).data(d))&&b.close()}return this.each(b)},val:function(b){function c(){var c;(c=a(this).data(d))&&c.setVal(b)}function e(a){var b,c;return(b=a.data(d))&&(c=b.getVal()),c}return arguments.length?this.each(c):e(this.first())},destroy:function(){function b(){var b,c=a(this);(b=c.data(d))&&(b.destroy(),c.removeData(d))}return this.each(b)}},a.fn.typeahead=function(b){var c;return e[b]&&"initialize"!==b?(c=this.filter(function(){return!!a(this).data(d)}),e[b].apply(c,[].slice.call(arguments,1))):e.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this}}()}(window.jQuery);var hlweight=7,hlColor="#00CCFF",polyLayer=[],layersearch,props,header,content,featureName,featureClass,featureIcon,titleName,headerClass;$(document).ready(function(){$('a[href="#"]').click(function(a){a.preventDefault()})}),L.TopoJSON=L.GeoJSON.extend({addData:function(a){if("Topology"===a.type)for(key in a.objects)geojson=topojson.feature(a,a.objects[key]),L.GeoJSON.prototype.addData.call(this,geojson);else L.GeoJSON.prototype.addData.call(this,a)}})
;var oLat=32.812934,oLng=-116.608421,zLevel=9,Esri_WorldImagery=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),Esri_transportation=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",{minZoom:8,maxZoom:18}),Esri_WorldGrayCanvas=L.tileLayer("http://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}),map=L.map("mapDIV",{minZoom:zLevel,zoomControl:!1,layers:[Esri_WorldGrayCanvas]}).setView([oLat,oLng],zLevel),baseLayers={Satellite:Esri_WorldImagery,"Street Map":Esri_WorldGrayCanvas};L.control.layers(baseLayers).addTo(map);var topPane=map._createPane("leaflet-top-pane",map.getPanes().mapPane);map.on("moveend",function(){map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels(),map.getZoom()<=13&&map.removeLayer(Esri_transportation)}),map.on("baselayerchange",function(){map.getZoom()>13&&map.hasLayer(Acetate_all)&&map.removeLayer(Esri_transportation),map.getZoom()>13&&map.hasLayer(Esri_WorldImagery)&&addStreetLabels()});var IconPresets={iconSet:"dynico",markerSet:"open-freight",mapMarker:"circle-cm",legendMarker:"circle-md"},layer1icon=L.OpenFreightMarkers.icon({icon:"road",markerColor:"purple",layer:"layer1",title:"Major Roads"},IconPresets),layer3icon=L.OpenFreightMarkers.icon({icon:"truck",markerColor:"purple",layer:"layer3",title:"Truck Inspection Facilities"},IconPresets),layer4icon=L.OpenFreightMarkers.icon({icon:"parking",markerColor:"purple",layer:"layer4",title:"Truck Parking Facilities"},IconPresets),layer5icon=L.OpenFreightMarkers.icon({icon:"railyard",markerColor:"gold",layer:"layer5",title:"Rail Yards"},IconPresets),layer6icon=L.OpenFreightMarkers.icon({icon:"rail",markerColor:"gold",layer:"layer6",title:"Rail Lines"},IconPresets),layer7icon=L.OpenFreightMarkers.icon({icon:"intermodal",markerColor:"gold",layer:"layer7",title:"Intermodal Facilities"},IconPresets),layer8icon=L.OpenFreightMarkers.icon({icon:"railxing",markerColor:"gold",layer:"layer8",title:"Rail Grade Crossings"},IconPresets),layer9icon=L.OpenFreightMarkers.icon({icon:"port",markerColor:"blue",layer:"layer9",title:"Ports of Entry"},IconPresets),layer10icon=L.OpenFreightMarkers.icon({icon:"ship",markerColor:"blue",layer:"layer10",title:"Marine Terminals"},IconPresets),layer11icon=L.OpenFreightMarkers.icon({icon:"anchor",markerColor:"blue",layer:"layer11",title:"Anchorages"},IconPresets),layer12icon=L.OpenFreightMarkers.icon({icon:"airport",markerColor:"green",layer:"layer12",title:"Commercial Airports"},IconPresets),layer13icon=L.OpenFreightMarkers.icon({icon:"airport",markerColor:"ltgreen",layer:"layer13",title:"Municipal Airports"},IconPresets),layer14icon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"red",layer:"layer14",title:"Employment Centers"},IconPresets),layer15icon=L.OpenFreightMarkers.icon({icon:"center",markerColor:"red",layer:"layer15",title:"Other Major Employers"},IconPresets),layer16icon=L.OpenFreightMarkers.icon({icon:"pipeline",markerColor:"yellow",layer:"layer16",title:"Energy & Utilities"},IconPresets),layer1Search=[],layer2Search=[],layer3Search=[],layer4Search=[],layer5Search=[],layer6Search=[],layer7Search=[],layer8Search=[],layer9Search=[],layer10Search=[],layer11Search=[],layer12Search=[],layer13Search=[],layer14Search=[],layer15Search=[],layer16Search=[],layer17Search=[],LayerStyle=[],layer1=new L.geoJson(null,{style:{color:"#884C9E",weight:3,opacity:1},onEachFeature:function(a,b){b.on({click:MajorRoads,dblclick:zoomToFeature}),layer1Search.push({name:b.feature.properties.Name,source:"Layer 1",id:L.stamp(b),bounds:b.getBounds()})}}),layer2=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer2icon})},onEachFeature:function(a,b){b.on({click:Connectors,dblclick:zoomToPoint}),layer2Search.push({name:b.feature.properties.Name,source:"Layer 2",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer3=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer3icon})},onEachFeature:function(a,b){b.on({click:InspectionFacilities,dblclick:zoomToPoint}),layer3Search.push({name:b.feature.properties.Name,source:"Layer 3",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer4pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer4icon})},onEachFeature:function(a,b){b.on({click:TruckParkingFacilities,dblclick:zoomToPoint})}}),layer4poly=L.geoJson(null,{style:{weight:4,color:"#884C9E",opacity:.75},onEachFeature:function(a,b){b.on({click:TruckParkingFacilities,dblclick:zoomToFeature}),layer5Search.push({name:b.feature.properties.Name,source:"Layer 4",id:L.stamp(b),bounds:b.getBounds()})}}),layer4=new L.FeatureGroup([layer4pt,layer4poly]),layer5pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer5icon})},onEachFeature:function(a,b){b.on({click:RailYards,dblclick:zoomToPoint})}}),layer5poly=L.geoJson(null,{style:{weight:4,color:"#F9BF72",opacity:.75},onEachFeature:function(a,b){b.on({click:RailYards,dblclick:zoomToFeature}),layer5Search.push({name:b.feature.properties.Name,source:"Layer 5",id:L.stamp(b),bounds:b.getBounds()})}}),layer5=new L.FeatureGroup([layer5pt,layer5poly]),layer6=L.geoJson(null,{style:{color:"#F9BF72",weight:3,opacity:1},onEachFeature:function(a,b){b.on({click:RailLines,dblclick:zoomToPoint}),layer6Search.push({name:b.feature.properties.Name,source:"Layer 6",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer7=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer7icon})},onEachFeature:function(a,b){b.on({click:IntermodalFacilities,dblclick:zoomToPoint}),layer7Search.push({name:b.feature.properties.Name,source:"Layer 7",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer8=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer8icon})},onEachFeature:function(a,b){b.on({click:RailGradeCrossings,dblclick:zoomToPoint}),layer8Search.push({name:b.feature.properties.Name,source:"Layer 8",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer9pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer9icon})},onEachFeature:function(a,b){b.on({click:PortsOfEntry,dblclick:zoomToPoint})}}),layer9poly=L.geoJson(null,{style:{weight:4,color:"#0E76BC",opacity:.75},onEachFeature:function(a,b){b.on({click:PortsOfEntry,dblclick:zoomToFeature}),layer9Search.push({name:b.feature.properties.Name,source:"Layer 9",id:L.stamp(b),bounds:b.getBounds()})}}),layer9=new L.FeatureGroup([layer9pt,layer9poly]),layer10pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer10icon})},onEachFeature:function(a,b){b.on({click:PortTerminals,dblclick:zoomToPoint})}}),layer10poly=L.geoJson(null,{style:{weight:4,color:"#54C4C8",opacity:.75},onEachFeature:function(a,b){b.on({click:PortTerminals,dblclick:zoomToFeature}),layer10Search.push({name:b.feature.properties.Name,source:"Layer 10",id:L.stamp(b),bounds:b.getBounds()})}}),layer10=new L.FeatureGroup([layer10pt,layer10poly]),layer11=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer11icon})},onEachFeature:function(a,b){b.on({click:Anchorages,dblclick:zoomToPoint}),layer11Search.push({name:b.feature.properties.Name,source:"Layer 11",id:L.stamp(b),lat:b.feature.geometry.coordinates[1],lng:b.feature.geometry.coordinates[0]})}}),layer12pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer12icon})},onEachFeature:function(a,b){b.on({click:CommAirports,dblclick:zoomToPoint})}}),layer12poly=L.geoJson(null,{style:{weight:4,color:"#216937",opacity:.75},onEachFeature:function(a,b){b.on({click:CommAirports,dblclick:zoomToFeature}),layer12Search.push({name:b.feature.properties.Name,source:"Layer 12",id:L.stamp(b),bounds:b.getBounds()})}}),layer12=new L.FeatureGroup([layer12pt,layer12poly]),layer13pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer13icon})},onEachFeature:function(a,b){b.on({click:MunicipalAirports,dblclick:zoomToPoint})}}),layer13poly=L.geoJson(null,{style:{weight:4,color:"#AED199",opacity:.75},onEachFeature:function(a,b){b.on({click:MunicipalAirports,dblclick:zoomToFeature}),layer13Search.push({name:b.feature.properties.Name,source:"Layer 13",id:L.stamp(b),bounds:b.getBounds()})}}),layer13=new L.FeatureGroup([layer13pt,layer13poly]),layer14pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer14icon})},onEachFeature:function(a,b){b.on({click:EmploymentCenters,dblclick:zoomToPoint})}}),layer14poly=L.geoJson(null,{style:{weight:4,color:"#C1332B",opacity:.75},onEachFeature:function(a,b){b.on({click:EmploymentCenters,dblclick:zoomToFeature}),layer14Search.push({name:b.feature.properties.Name,source:"Layer 14",id:L.stamp(b),bounds:b.getBounds()})}}),layer14=new L.FeatureGroup([layer14pt,layer14poly]),layer15pt=L.geoJson(null,{pointToLayer:function(a,b){return L.marker(b,{icon:layer15icon})},onEachFeature:function(a,b){b.on({click:EmploymentCenters,dblclick:zoomToPoint})}}),layer15poly=L.geoJson(null,{style:{weight:4,color:"#C1332B",opacity:.75},onEachFeature:function(a,b){b.on({click:EmploymentCenters,dblclick:zoomToFeature}),layer15Search.push({name:b.feature.properties.Name,source:"Layer 14",id:L.stamp(b),bounds:b.getBounds()})}}),layer15=new L.FeatureGroup([layer15pt,layer15poly]),layer16=new L.geoJson(null,{style:{color:"#EFD52B",weight:3,opacity:1},onEachFeature:function(a,b){b.on({click:Pipelines,dblclick:zoomToFeature}),layer1Search.push({name:b.feature.properties.Name,source:"Layer 16",id:L.stamp(b),bounds:b.getBounds()})}});$("#searchbox").click(function(){$(this).select()}),$(document).one("ajaxStop",function(){$("#loading").hide();var a=new Bloodhound({name:"Layer 1",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer1Search,limit:10}),b=new Bloodhound({name:"Layer 2",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer2Search,limit:10}),c=new Bloodhound({name:"Layer 3",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer3Search,limit:10}),d=new Bloodhound({name:"Layer 4",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),e=new Bloodhound({name:"Layer 5",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),f=new Bloodhound({name:"Layer 6",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),g=new Bloodhound({name:"Layer 7",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),h=new Bloodhound({name:"Layer 8",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),i=new Bloodhound({name:"Layer 9",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),j=new Bloodhound({name:"Layer 10",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),k=new Bloodhound({name:"Layer 11",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),l=new Bloodhound({name:"Layer 12",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),m=new Bloodhound({name:"Layer 13",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),n=new Bloodhound({name:"Layer 14",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),o=new Bloodhound({name:"Layer 15",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),p=new Bloodhound({name:"Layer 16",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10}),q=new Bloodhound({name:"Layer 17",datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:layer4Search,limit:10});a.initialize(),b.initialize(),c.initialize(),d.initialize(),e.initialize(),f.initialize(),g.initialize(),h.initialize(),i.initialize(),j.initialize(),k.initialize(),l.initialize(),m.initialize(),n.initialize(),o.initialize(),p.initialize(),q.initialize(),$("#searchbox").typeahead({minLength:2,highlight:!0,hint:!1},{name:"Layer1data",displayKey:"name",source:a.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 1</h5>"}},{name:"Layer2data",displayKey:"name",source:b.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 2</h5>"}},{name:"Layer3data",displayKey:"name",source:c.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 3</h5>"}},{name:"Layer4data",displayKey:"name",source:d.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 4</h5>"}},{name:"Layer5data",displayKey:"name",source:e.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 5</h5>"}},{name:"Layer6data",displayKey:"name",source:f.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 6</h5>"}},{name:"Layer7data",displayKey:"name",source:g.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 7</h5>"}},{name:"Layer8data",displayKey:"name",source:h.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 8</h5>"}},{name:"Layer9data",displayKey:"name",source:i.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 9</h5>"}},{name:"Layer10data",displayKey:"name",source:j.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 10</h5>"}},{name:"Layer11data",displayKey:"name",source:k.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 11</h5>"}},{name:"Layer12data",displayKey:"name",source:l.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 12</h5>"}},{name:"Layer13data",displayKey:"name",source:m.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 13</h5>"}},{name:"Layer14data",displayKey:"name",source:n.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 14</h5>"}},{name:"Layer15data",displayKey:"name",source:o.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 15</h5>"}},{name:"Layer16data",displayKey:"name",source:p.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 16</h5>"}},{name:"Layer17data",displayKey:"name",source:q.ttAdapter(),templates:{header:"<h5 class='typeahead-header'>Layer 17</h5>"}}).on("typeahead:selected",function(a,b){$("#search-panel").fadeOut("fast"),resetHighlight(),resetInfoWindow(),$e1.typeahead("val",""),$("#nav_search").hasClass("hidden")&&($("#pFFlanding").fadeOut(800),$("#nav_search").removeClass("hidden"),$("#maplink").addClass("hidden")),"Layer 1"===b.source&&(map.hasLayer(layer1)||(map.addLayer(layer1),$("#layer1").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 2"===b.source&&(map.hasLayer(layer2)||(map.addLayer(layer2),$("#layer2").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 3"===b.source&&(map.hasLayer(layer3)||(map.addLayer(layer3),$("#layer3").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 4"===b.source&&(map.hasLayer(layer4)||(map.addLayer(layer4),$("#layer4").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 5"===b.source&&(map.hasLayer(layer5)||(map.addLayer(layer5),$("#layer5").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 6"===b.source&&(map.hasLayer(layer6)||(map.addLayer(layer6),$("#layer6").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 7"===b.source&&(map.hasLayer(layer7)||(map.addLayer(layer7),$("#layer7").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 8"===b.source&&(map.hasLayer(layer8)||(map.addLayer(layer8),$("#layer8").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 9"===b.source&&(map.hasLayer(layer9)||(map.addLayer(layer9),$("#layer9").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 10"===b.source&&(map.hasLayer(layer10)||(map.addLayer(layer10),$("#layer10").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 11"===b.source&&(map.hasLayer(layer11)||(map.addLayer(layer11),$("#layer11").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 12"===b.source&&(map.hasLayer(layer12)||(map.addLayer(layer12),$("#layer12").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 13"===b.source&&(map.hasLayer(layer13)||(map.addLayer(layer13),$("#layer13").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 14"===b.source&&(map.hasLayer(layer14)||(map.addLayer(layer14),$("#layer14").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 15"===b.source&&(map.hasLayer(layer15)||(map.addLayer(layer15),$("#layer15").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click")),"Layer 16"===b.source&&(map.hasLayer(layer16)||(map.addLayer(layer16),$("#layer16").prop("checked",!0)),map.fitBounds(b.bounds),map._layers[b.id]&&map._layers[b.id].fire("click"))}).on("typeahead:opened",function(){$(".navbar-collapse.in").css("max-height",$(document).height()-$(".navbar-header").height()),$(".navbar-collapse.in").css("height",$(document).height()-$(".navbar-header").height())}).on("typeahead:closed",function(){$(".navbar-collapse.in").css("max-height",""),$(".navbar-collapse.in").css("height","")}),$(".twitter-typeahead").css("position","static"),$(".twitter-typeahead").css("display","block")}),$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),$.fn.capitalize=function(){return $.each(this,function(){var a=this.value;a=a.charAt(0).toUpperCase()+a.slice(1),this.value=a}),this};var current_tab;$(function(){var a=document.location.toString(),b=$(window).height()-250;if(a.match("#")){var c=a.split("#")[1].split("/"),d=c[0];a.split("#")[1];"map"!=d&&void 0!==d?($("#"+d).show(),!1===tab_status[d]&&($("#"+d).load("includes/"+d+".html",loadScript(d)),tab_status[d]=!0),$("#pFFlanding").css("min-height",b+"px"),$(".content-footer").fadeIn("slow")):setMap()}else $("#home").show(),$("#pFFlanding").css("min-height",b+"px"),$(".content-footer").fadeIn("slow");$('a[data-toggle="tab"]').on("show.bs.tab",function(a){window.location.hash=a.target.hash})}),$(window).bind("hashchange",function(){var a=getLocationHash();if("map?search"===a)$("#search-panel").fadeIn("fast"),location.hash="#map";else if("map"!=a){$(".mapUI").fadeOut("fast","easeOutQuad",function(){$(".landingUI").fadeIn("fast","easeInQuad")}),!1===tab_status[a]&&($("#"+a).load("includes/"+a+".html",loadScript(a)),tab_status[a]=!0),$(".landtab-content > .tab-pane").hide();var b=$(window).height()-250;$("#pFFlanding").css("min-height",b+"px"),$("#"+a).show(),$("body, html, #pFFlanding").scrollTop(0)}else setMap()}),$(window).resize(function(){if($(".tt-dropdown-menu").css("max-height",$("#container").height()-$(".navbar").height()-20),document.body.clientWidth<=767)$("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#sidebar").css("display","none"),$("#toggle i").attr("class","glyphicon glyphicon-th-list");else{"block"==$("#sidebar").css("display")?($("#mapDIV").attr("class","col-sm-8 col-lg-9 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-chevron-left")):($("#mapDIV").attr("class","col-sm-12 col-lg-12 leaflet-container leaflet-fade-anim"),$("#toggle i").attr("class","glyphicon glyphicon-th-list"))}map.invalidateSize()}),"Microsoft Internet Explorer"==navigator.appName&&$("input").each(function(){""==$(this).val()&&""!=$(this).attr("placeholder")&&($(this).val($(this).attr("placeholder")),$(this).focus(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),$(this).blur(function(){""==$(this).val()&&$(this).val($(this).attr("placeholder"))}))}),$(document).ready(function(){function a(){return $("#loadingtm").show().delay(100).promise()}$('[data-toggle="tooltip"]').tooltip(),document.body.clientWidth<=767&&($("#mapDIV").css("class","col-sm-12 col-lg-12"),$("#sidebar").css("display","none")),$(".checked_all").on("click",function(b){var c=$(this).parent().siblings(".panel-collapse").children(".panel-body").children("input.Chkd"),d=$(this);"true"==c.attr("value")?a().done(function(){d.children().attr("class","chkicon dynico dynico-check-square-o"),$(c).siblings(".checkbox").children("input").prop("checked",!0).change(),$(c).val("false"),$("#loadingtm").fadeOut(150)}):(d.children().attr("class","chkicon dynico dynico-square-o"),$(c).siblings(".checkbox").children("input").prop("checked",!1).change(),$(c).val("true"))})}),$('input:checkbox[name="LayerCont"]').on("change",function(){var a=[];if($("#"+$(this).attr("id")).is(":checked")){$("#loadingtm").show(),$('input:checkbox[name="LayerCont"]').each(function(){map.removeLayer(window[$(this).attr("id")]),$("#"+$(this).attr("id")).is(":checked")&&a.push({"z-index":$(this).attr("z-index"),layer:$(this)})});var b=sortByKey(a,"z-index");$.each(b,function(){map.addLayer(window[$(this)[0].layer[0].id])}),$("#loadingtm").delay(100).fadeOut(150)}else map.removeLayer(window[$(this).attr("id")])}),$(".layer").change(function(){$(this).closest(".panel-body").find("input.layer").length==$(this).closest(".panel-body").find("input.layer:checked").length?($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-check-square-o"),$(this).closest(".panel-body").find(".Chkd").val("false")):($(this).closest(".panel").find(".checked_all").children().attr("class","chkicon dynico dynico-square-o"),$(this).closest(".panel-body").find(".Chkd").val("true")),$(this).siblings(".dynacheck").length>0&&($(this).is(":checked")?$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-check-square-o"):$(this).siblings(".dynacheck").find(".legend-check i").attr("class","dynico dynico-square-o"))}),$("#toggle").click(function(){return $("#toggle i").toggleClass("glyphicon-chevron-left glyphicon-th-list"),$("#mapDIV").toggleClass("col-sm-8 col-lg-9 col-sm-12 col-lg-12"),"block"==$("#sidebar").css("display")?$("#sidebar").css("display","none"):$("#sidebar").css("display","block"),document.body.clientWidth<=767&&$("#mapDIV").toggleClass("hidden"),map.invalidateSize(),!1}),$(".InfoTgl").click(function(){$("#infobox_").hasClass("active")?togglemin():toggleinfo()}),$("#mobileInfo_modal").on("hide.bs.modal",function(){resetHighlight()}),$(document).ajaxStop(function(){setTimeout(function(){$("#loadingtm").hide()},300)}),L.Control.mapCenter=L.Control.Zoom.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out",zoomMinText:"<i class='dynico dynico-dvrpc'></i>",zoomMinTitle:"View Full Region",vcLatLng:[oLat,oLng],vcZoom:9},onAdd:function(a){var b="leaflet-control-zoom",c=L.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._map=a,this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._zoomMinButton=this._createButton(d.zoomMinText,d.zoomMinTitle,b+"-min",c,this._zoomMin,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},_zoomMin:function(){var a=this.options,b=a.vcZoom||6;this._map.setView(a.vcLatLng,b)},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";L.DomUtil.removeClass(this._zoomInButton,b),L.DomUtil.removeClass(this._zoomOutButton,b),L.DomUtil.removeClass(this._zoomMinButton,b),a._zoom===a.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,b),a._zoom===a.getMinZoom()&&L.DomUtil.addClass(this._zoomMinButton,b)}}),map.addControl(new L.Control.mapCenter),map.on("click",function(a){resetHighlight(),resetInfoWindow(),$("#search-panel").fadeOut("fast"),$("#searchbox").typeahead("val","")}),$(".tab-content").find(".panel-group.legend .panel-heading").first().find("a > div").attr("data-placement","bottom"),$(".panel-group.legend").find(".panellink").attr("data-toggle","tooltip").attr("title","View/hide layers in group"),$(".panel-group.legend").find(".panelinfo").attr("data-toggle","tooltip").attr("title","Learn about these layers"),$(".panel-group.legend").find(".checked_all").attr("data-toggle","tooltip").attr("title","Toggle All Layers").attr("data-placement","left"),function(a){"use strict";function b(b){a(b).on("click"+n,this.toggle)}function c(a,b){a.hasClass("pull-center")&&a.css("margin-right",a.outerWidth()/-2),a.hasClass("pull-middle")&&a.css("margin-top",a.outerHeight()/-2-b.outerHeight()/2)}function d(b,c){if(g){c||(c=[g]);var d;g[0]!==c[0][0]?d=g:(d=c[c.length-1],d.parent().hasClass(k)&&(d=d.parent())),d.find("."+o).removeClass(o),d.hasClass(o)&&d.removeClass(o),d===g&&(g=null,a(j).remove())}}function e(a){for(var b,c=[a];!b||b.hasClass(l);)b=(b||a).parent(),b.hasClass(k)&&(b=b.parent()),b.children(h)&&c.unshift(b);return c}function f(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var g,h='[data-toggle="dropdown"]',i=".disabled, :disabled",j=".dropdown-backdrop",k="dropdown-menu",l="dropdown-submenu",m=".bs.dropdown.data-api",n=".bs.dropdown",o="open",p="ontouchstart"in document.documentElement,q=b.prototype;q.toggle=function(b){var h=a(this);if(!h.is(i)){var m=f(h),n=m.hasClass(o),q=m.hasClass(l),r=q?e(m):null;if(d(b,r),!n){r||(r=[m]),!p||m.closest(".navbar-nav").length||r[0].find(j).length||a('<div class="'+j.substr(1)+'"/>').appendTo(r[0]).on("click",d);for(var s=0,t=r.length;s<t;s++)r[s].hasClass(o)||(r[s].addClass(o),c(r[s].children("."+k),r[s]));g=r[0]}return!1}},q.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var c=a(this);if(b.preventDefault(),b.stopPropagation(),!c.is(".disabled, :disabled")){var d=f(c),e=d.hasClass("open");if(!e||e&&27==b.keyCode)return 27==b.which&&d.find(h).trigger("focus"),c.trigger("click");var g=" li:not(.divider):visible a",i="li:not(.divider):visible > input:not(disabled) ~ label",j=d.find(i+', [role="menu"]'+g+', [role="listbox"]'+g);if(j.length){var k=j.index(j.filter(":focus"));38==b.keyCode&&k>0&&k--,40==b.keyCode&&k<j.length-1&&k++,~k||(k=0),j.eq(k).trigger("focus")}}}},q.change=function(b){var c,d,e,f="";if(c=a(this).closest("."+k),d=c.parent().find("[data-label-placement]"),d&&d.length||(d=c.parent().find(h)),d&&d.length&&!1!==d.data("placeholder")){void 0==d.data("placeholder")&&d.data("placeholder",a.trim(d.text())),f=a.data(d[0],"placeholder"),e=c.find("li > input:checked"),e.length&&(f=[],e.each(function(){var b=a(this).parent().find("label").eq(0),c=b.find(".data-label");if(c.length){var d=a("<p></p>");d.append(c.clone()),b=d.html()}else b=b.html();b&&f.push(a.trim(b))}),f=f.length<4?f.join(", "):f.length+" selected");var g=d.find(".caret");d.html(f||"&nbsp;"),g.length&&d.append(" ")&&g.appendTo(d)}};var r=a.fn.dropdown;a.fn.dropdown=function(c){return this.each(function(){var d=a(this),e=d.data("bs.dropdown");e||d.data("bs.dropdown",e=new b(this)),"string"==typeof c&&e[c].call(d)})},a.fn.dropdown.Constructor=b,a.fn.dropdown.clearMenus=function(b){return a(j).remove(),a("."+o+" "+h).each(function(){var c=f(a(this)),d={relatedTarget:this};c.hasClass("open")&&(c.trigger(b=a.Event("hide"+n,d)),b.isDefaultPrevented()||c.removeClass("open").trigger("hidden"+n,d))}),this},a.fn.dropdown.noConflict=function(){return a.fn.dropdown=r,this},a(document).off(m).on("click"+m,d).on("click"+m,h,q.toggle).on("click"+m,'.dropdown-menu > li > input[type="checkbox"] ~ label, .dropdown-menu > li > input[type="checkbox"], .dropdown-menu.noclose > li',function(a){a.stopPropagation()}).on("change"+m,'.dropdown-menu > li > input[type="checkbox"], .dropdown-menu > li > input[type="radio"]',q.change).on("keydown"+m,h+', [role="menu"], [role="listbox"]',q.keydown)}(jQuery);